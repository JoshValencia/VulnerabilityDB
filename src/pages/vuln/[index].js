//    pages/fruit/[index].js
import { Vulnerabilities } from "../../data.js";
import Vulnerability from "@/templates/Vulnerability.js";

const VulnPage = ({ vulnerability, list }) => {
  return <Vulnerability vulnerability={vulnerability} list={list} />;
};

export async function getStaticPaths() {
  let paths = Vulnerabilities.map((x) => {
    return { params: { index: x.id } };
  });
  return {
    paths,
    fallback: false,
  };
}

export async function getStaticProps(context) {
  return {
    props: {
      vulnerability: Vulnerabilities.find((e) => e.id == context.params.index),
      list: Vulnerabilities.map((v) => {
        return { id: v.id, name: v.severity[0].type };
      }),
    },
  };
}

export default VulnPage;
